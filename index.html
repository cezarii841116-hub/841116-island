<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>841116-ISLAND | Archive</title>
    <style>
        body { background: #0a0a0a; color: #00ff41; font-family: monospace; margin: 0; padding: 20px; }
        .header-container { border-bottom: 2px solid #00ff41; padding-bottom: 20px; margin-bottom: 30px; }
        .feed { max-width: 600px; margin: 0 auto; }
        .cover-img { width: 100%; border: 1px solid #00ff41; margin-bottom: 20px; border-radius: 4px; display: block; }
        .create-post { background: #1a1a1a; padding: 20px; border: 1px solid #00ff41; margin-bottom: 20px; text-align: center; }
        .upload-trigger { 
            background: #00ff41; color: #000; border: none; padding: 12px 24px; 
            font-weight: bold; cursor: pointer; font-family: monospace; width: 100%;
        }
        .post { background: #1a1a1a; border: 1px solid #333; margin-bottom: 20px; padding: 15px; }
        .post-header { font-size: 0.8em; color: #888; margin-bottom: 10px; }
        .post-img { width: 100%; border-radius: 4px; display: block; }
    </style>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
</head>
<body>

<div class="header-container">
    <div class="header-overlay">NODE: 841116 | ARCHIVE-SYSTEM v1.0</div>
</div>

<div class="feed">
    <img src="https://res.cloudinary.com/dxzdp3e8q/image/upload/v1735654157/mptf0un09u9uym2yveof.jpg" id="main-cover" class="cover-img">

    <div class="create-post">
        <button class="upload-trigger" id="upload-button"> 小 校小孝  小孝...</button>
    </div>

    <div id="posts-container">
        </div>
</div>

<script>
    const uploadBtn = document.getElementById('upload-button');
    const postsContainer = document.getElementById('posts-container');

    // 1.   孝 小孝  小孝孝
    window.onload = () => {
        const savedPosts = JSON.parse(localStorage.getItem('island_posts')) || [];
        savedPosts.forEach(url => renderPost(url));
    };

    // 2. 肖校笑携  CLOUDINARY
    const myWidget = cloudinary.createUploadWidget({
        cloudName: 'dxzdp3e8q', 
        uploadPreset: 'island_preset'
    }, (error, result) => {
        if (!error && result && result.event === "success") { 
            const imageUrl = result.info.secure_url;
            savePost(imageUrl);
            renderPost(imageUrl);
        }
    });

    uploadBtn.addEventListener('click', () => {
        myWidget.open();
    }, false);

    // 3.   孝孝 (LocalStorage)
    function savePost(url) {
        const savedPosts = JSON.parse(localStorage.getItem('island_posts')) || [];
        savedPosts.unshift(url);
        localStorage.setItem('island_posts', JSON.stringify(savedPosts));
    }

    // 4.   小孝
    function renderPost(imageUrl) {
        const postHtml = `
            <div class="post">
                <div class="post-header">SYSTEM_ADMIN > UPLOAD_SUCCESS > ${new Date().toLocaleTimeString()}</div>
                <img src="${imageUrl}" class="post-img">
            </div>
        `;
        postsContainer.insertAdjacentHTML('afterbegin', postHtml);
    }
</script>

</body>
</html>
